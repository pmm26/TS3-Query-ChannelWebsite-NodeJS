const TeamspeakQuery = require('.');
const query = new TeamspeakQuery.Raw();

function parseList(data) {
  return data.raw()
    .split('|')
    .map(TeamspeakQuery.Base.parse)
    .map(entry => entry.params);
}

query.send('login', 'serveradmin', 'jbMPut5x')
  .then(() => query.send('use', '1'))
  .then(() => query.send('clientlist', '-ip'))
  .then(parseList)
  // .then(list => list.find(client => client.client_type == 1))
  .then(console.log)
  .catch(console.error);
